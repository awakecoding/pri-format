# PRI file format

makepri.exe is a limited, closed-source command-line tool and the PRI file format is not documented. This is an attempt at making UWP resource editing possible beyond what the original tooling supports. Lots of half-baked reverse engineering notes in here for yet another project I probably will never finish. Feel free to dig into it, it's all experimental stuff for now.

resources.pri

18911528 bytes (0x01209128)
checksum: 1912541329 (0x71FF1091)

## Header

6D 72 6D 5F 70 72 69 32 "mrm_pri2" (8 bytes)
00 00 01 00
28 91 20 01 total file size (18911528 bytes)
20 00 00 00 header size (32 bytes)
20 15 00 00 
A8 00 FF FF checksum?
00 00 00 00

## Body

5B 6D 72 6D 5F 64 65 63 6E 5F 69 6E 66 6F 5D 00 "[mrm_decn_info]" (16 bytes)
00 00 00 00
00 00 00 00
00 00 00 00
18 11 00 00 (4376)

5B 6D 72 6D 5F 70 72 69 64 65 73 63 65 78 5D 00 "[mrm_pridescex]" (16 bytes)
00 00 00 00
00 00 00 00
18 11 00 00 (4376)
90 01 00 00 (400)

5B 6D 72 6D 5F 70 72 69 64 65 73 63 65 78 5D 00 "[mrm_pridescex]" (16 bytes)
00 00 00 00
00 00 00 00
90 01 00 00 (400)
00 00 00 00

02 00 FF FF 00 00 01 00 01 00 01 00 03 00 00 00 A4 00 00 00 02 00 00 00 03 00 04 00 05 00 06 00 07 00 08 00 09 00 0A 00 0B 00 0C 00 0D 00 0E 00 0F 00 10 00 11 00 12 00

5B 6D 72 6D 5F 68 73 63 68 65 6D 61 65 78 5D 20 "[mrm_hschemaex] " (16 bytes)
00 00 00 00
00 00 00 00
A8 12 00 00
30 D5 00 00

5B 6D 72 6D 5F 68 73 63 68 65 6D 61 65 78 5D 20 "[mrm_hschemaex] " (16 bytes)
00 00 00 00
00 00 00 00
30 D5 00 00
00 00 00 00

01 00 25 00
1A 00 00 00

5B 6D 72 6D 5F 72 65 73 5F 6D 61 70 32 5F 5D 00 "[mrm_res_map2_]" (16 bytes)
00 00 00 00
00 00 00 00
D8 E7 00 00
60 6C 01 00

5B 6D 72 6D 5F 72 65 73 5F 6D 61 70 32 5F 5D 00 "[mrm_res_map2_]" (16 bytes)
00 00 00 00
00 00 00 00
60 6C 01 00
00 00 00 00
00 00 00 00
02 00 00 00 00 00 07 00 01 00 01 00 05 04 00 00 78 2B 00 00 00 00 00 00 00 00 00 00 04 00 00 00 00 00 00 00 04 00 00 00 01 00 00 00 04 00 00 00 02 00 00 00 04 00 00 00 03 00 00 00 04 00 00 00 04 00 00 00

5B 64 65 66 5F 68 6E 61 6D 65 73 78 5D 20 20 00 "[def_hnamesx]" (16 bytes)
01 00 00 00
00 00 00 00
99 C5 BC F3
C0 01 00 00

# Data

5B 6D 72 6D 5F 64 61 74 61 69 74 65 6D 5D 20 00 "[mrm_dataitem] " (16 bytes)
00 00 00 00
00 00 00 00
38 54 02 00 (152632)
E0 0A 00 00 (2784)

5B 6D 72 6D 5F 64 61 74 61 69 74 65 6D 5D 20 00 "[mrm_dataitem] " (16 bytes)
00 00 00 00
00 00 00 00
E0 0A 00 00 (2784)
00 00 00 00 (0)

5B 6D 72 6D 5F 64 65 63 6E 5F 69 6E 66 6F 5D 00 "[mrm_decn_info]" (16 bytes)
00 00 00 00
00 00 00 00
18 11 00 00 data size
00 00 00 00
<variable data>

offset: 0x1520 (5408), length: 0x1118 (4376)

## Definitions

5B 64 65 66 5F 68 6E 61 6D 65 73 78 5D 20 20 00 "[def_hnamesx]" (16 bytes)
01 00 00 00
00 00 00 00
99 C5 BC F3
C0 01 00 00 (448)

05 04 00 00 (1029)
"ms-appx://Microsoft.WindowsTerminal/Microsoft.WindowsTerminal"
6D 00 73 00 2D 00 61 00 70 00 70 00 78 00 3A 00 2F 00 2F 00 4D 00 69 00 63 00 72 00 6F 00 73 00 6F 00 66 00 74 00 2E 00 57 00 69 00 6E 00 64 00 6F 00 77 00 73 00 54 00 65 00 72 00 6D 00 69 00 6E 00 61 00 6C 00 2F 00 00 00 4D 00 69 00 63 00 72 00 6F 00 73 00 6F 00 66 00 74 00 2E 00 57 00 69 00 6E 00 64 00 6F 00 77 00 73 00 54 00 65 00 72 00 6D 00 69 00 6E 00 61 00 6C 00

00 00 00 00
90 00 00 00 (144) ***
C5 05 00 00 (1477)
C0 01 00 00 (448)

05 04 00 00 (1029)
00 00 00 00
58 D4 00 00 (54360) ***
F1 78 00 00 (30961)
00 00 00 00
00 00 00 10
00 00 00 00
00 00 05 00 46 00 05 30 1D 00 03 00 00 00 1A 00 4D 00 1A 30 ED 31 A9 01 00 00 22 00 4D 00 22 30 B9 0A 66 00 00 00 21 00 4D 00 21 30 8D 0A 64 00 00 00 25 00 4D 00 25 30 51 00 08 00 00 00 11 00 4D 00 11 30 01 00 01 00 00 00 09 00 52 00 09 30 3C 34 BD 01 00 00 0B 00 54 00 0B 30 81 00 0A 00 01 00 0D 00 41 00 07 20 59 59 BC 01 01 00 13 00 44 00 0D 20 E3 78 04 04 01 00 0C 00 49 00 06 30 46 34 BE 01 01 00 20 00 4D 00 1A 30 21 34 BC 01 01 00 28 00 4D 00 22 30 CA 31 A8 01 01 00 17 00 4D 00 11 30 23 00 04 00 01 00 11 00 4E 00 0B 20 BB 77 FB 03 01 00 12 00 50 00 0C 30 4D 34 BF 01 01 00 11 00 54 00 0B 30 81 0A 63 00 0B 00 1A 00 4C 00 0D 20 EA 76 F0 03 0B 00 1F 00 4C 00 12 20 F8 76 F1 03 0B 00 1A 00 53 00 0D 20 0B 77 F2 03 0B 00 1D 00

//

53 00 10 20 19 77 F3 03 0B 00 22 00 53 00 15 20 2A 77 F4 03 0B 00 20 00 53 00 13 20 40 77 F5 03 0B 00 1A 00 53 00 0D 20 54 77 F6 03 0B 00 19 00 54 00 0C 20 62 77 F7 03 0B 00 28 00 54 00 1B 20 6F 77 F8 03 0B 00 28 00 54 00 1B 20 8B 77 F9 03 0B 00 20 00 57 00 13 20 A7 77 FA 03 0C 00 35 00

## Footer

DE FA FF DE (0xDEFFFADE)
28 91 20 01 total file size (18911528 bytes)
6D 72 6D 5F 70 72 69 32 "mrm_pri2" (8 bytes)
